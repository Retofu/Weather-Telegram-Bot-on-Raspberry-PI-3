from typing import Tuple


def weather_emoji_and_desc(code: int) -> Tuple[str, str]:
    # WMO weather codes mapping (simplified)
    mapping = {
        0: ("‚òÄÔ∏è", "–Ø—Å–Ω–æ"),
        1: ("üå§Ô∏è", "–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —è—Å–Ω–æ"),
        2: ("‚õÖ", "–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å"),
        3: ("‚òÅÔ∏è", "–ü–∞—Å–º—É—Ä–Ω–æ"),
        45: ("üå´Ô∏è", "–¢—É–º–∞–Ω"),
        48: ("üå´Ô∏è", "–¢—É–º–∞–Ω —Å –∏–∑–º–æ—Ä–æ–∑—å—é"),
        51: ("üå¶Ô∏è", "–ú–æ—Ä–æ—Å—å —Å–ª–∞–±–∞—è"),
        53: ("üå¶Ô∏è", "–ú–æ—Ä–æ—Å—å —É–º–µ—Ä–µ–Ω–Ω–∞—è"),
        55: ("üåßÔ∏è", "–ú–æ—Ä–æ—Å—å —Å–∏–ª—å–Ω–∞—è"),
        56: ("üåßÔ∏è", "–õ–µ–¥—è–Ω–∞—è –º–æ—Ä–æ—Å—å —Å–ª–∞–±–∞—è"),
        57: ("üåßÔ∏è", "–õ–µ–¥—è–Ω–∞—è –º–æ—Ä–æ—Å—å —Å–∏–ª—å–Ω–∞—è"),
        61: ("üå¶Ô∏è", "–î–æ–∂–¥—å —Å–ª–∞–±—ã–π"),
        63: ("üåßÔ∏è", "–î–æ–∂–¥—å —É–º–µ—Ä–µ–Ω–Ω—ã–π"),
        65: ("üåßÔ∏è", "–î–æ–∂–¥—å —Å–∏–ª—å–Ω—ã–π"),
        66: ("üåßÔ∏è", "–õ–µ–¥—è–Ω–æ–π –¥–æ–∂–¥—å —Å–ª–∞–±—ã–π"),
        67: ("üåßÔ∏è", "–õ–µ–¥—è–Ω–æ–π –¥–æ–∂–¥—å —Å–∏–ª—å–Ω—ã–π"),
        71: ("üå®Ô∏è", "–°–Ω–µ–≥ —Å–ª–∞–±—ã–π"),
        73: ("üå®Ô∏è", "–°–Ω–µ–≥ —É–º–µ—Ä–µ–Ω–Ω—ã–π"),
        75: ("‚ùÑÔ∏è", "–°–Ω–µ–≥ —Å–∏–ª—å–Ω—ã–π"),
        77: ("‚ùÑÔ∏è", "–°–Ω–µ–∂–Ω—ã–µ –∑–µ—Ä–Ω–∞"),
        80: ("üå¶Ô∏è", "–õ–∏–≤–Ω–∏ —Å–ª–∞–±—ã–µ"),
        81: ("üåßÔ∏è", "–õ–∏–≤–Ω–∏ —É–º–µ—Ä–µ–Ω–Ω—ã–µ"),
        82: ("‚õàÔ∏è", "–õ–∏–≤–Ω–∏ —Å–∏–ª—å–Ω—ã–µ"),
        85: ("üå®Ô∏è", "–°–Ω–µ–∂–Ω—ã–µ –ª–∏–≤–Ω–∏ —Å–ª–∞–±—ã–µ"),
        86: ("üå®Ô∏è", "–°–Ω–µ–∂–Ω—ã–µ –ª–∏–≤–Ω–∏ —Å–∏–ª—å–Ω—ã–µ"),
        95: ("‚õàÔ∏è", "–ì—Ä–æ–∑–∞"),
        96: ("‚õàÔ∏è", "–ì—Ä–æ–∑–∞ —Å –≥—Ä–∞–¥–æ–º"),
        99: ("‚õàÔ∏è", "–ì—Ä–æ–∑–∞ —Å —Å–∏–ª—å–Ω—ã–º –≥—Ä–∞–¥–æ–º"),
    }
    return mapping.get(code, ("‚ùî", "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"))


def format_day(title: str, f) -> str:
    emoji, desc = weather_emoji_and_desc(f.weathercode)
    # Note: sunrise/sunset times are already local to the requested timezone
    parts = [
        f"{title} {emoji} ‚Äî {desc}",
        f"–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: –º–∏–Ω {round(f.temp_min)}¬∞C, –º–∞–∫—Å {round(f.temp_max)}¬∞C",
        f"–í–µ—Ç–µ—Ä (–ø–æ—Ä—ã–≤—ã): –¥–æ {round(f.wind_speed_max)} –º/—Å",
        f"–û—Å–∞–¥–∫–∏ –∑–∞ –¥–µ–Ω—å: {round(f.precipitation_sum, 1)} –º–º",
    ]
    if f.sunrise and f.sunset:
        parts.append(f"–°–æ–ª–Ω—Ü–µ: –≤–æ—Å—Ö–æ–¥ {f.sunrise.split('T')[-1]}, –∑–∞–∫–∞—Ç {f.sunset.split('T')[-1]}")
    return "\n".join(parts)


